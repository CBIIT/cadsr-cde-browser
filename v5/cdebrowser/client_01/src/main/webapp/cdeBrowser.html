<!DOCTYPE html>

<HTML>
<HEAD>
    <TITLE>
        cdeBrowser Client 5
    </TITLE>
    <link rel="stylesheet" type="text/css" href="css/cdeBrowserClient.css">
    <link rel="stylesheet" type="text/css" href="css/treeMenu.css">
    <link rel="stylesheet" type="text/css" href="css/cdeBrowserButtons.css">

    <!-- moved to local system
    <script type='text/javascript' src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type='text/javascript' src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.6/angular.min.js"></script>
    -->
    <script type='text/javascript' src="jquery.min.js"></script>
    <script type='text/javascript' src="angular.min.js"></script>
    <script type='text/javascript' src="cdeBrowserTreeMenu.js"></script>
    <script type='text/javascript' src="cdeBrowserProperties.js"></script>

</HEAD>

<BODY>

<!-- =============================================================================== -->

<div top-header id="top-header" >
    <a href="http://www.cancer.gov" target="_blank" >
        <img id="headerLogoLeft" src="icons/iconSet0/NCI_logo_white.png" border=0>
        <img id="headerTextLeft" src="icons/iconSet0/NCI_text_white.png" border=0>
        <img id="headerTextRight" src="icons/iconSet0/www_text_white.png" border=0 align="right">
    </a>

</div>
<!-- =============================================================================== -->

<!-- FIXME, rename id  -->
<div topButtons  id="top-header-right" class="top-header-right">

    <TABLE valign="top" width=100%; Cellpadding=0 Cellspacing=0 border=0>
        <tr>
            <td id="top-cadsrTd">
                <div top-cadsr id="top-header-left">
                    <a top_image href="http://ncicb.nci.nih.gov/NCICB/infrastructure/cacore_overview/cadsr"
                       target="_blank">
                        <img src="icons/iconSet0/caDSR_logo.png">
                    </a>
                </div>
            </td>



            <td align="right">
                <!-- Logo and four buttons -->
                <table border=0>
                    <TR>
                        <!-- large CDE Browser Logo  -->
                        <td valign="top" align="left" nowrap>
                            <img src="icons/iconSet0/cdeBrowserLogo.png" border="0" alt="cdeBrowserLogo">
                        </td>


                        <!--  Four buttons  -->
                        <td align=right valign=top  colspan=3  align="right" nowrap>
                            <TABLE Cellpadding=0 Cellspacing=0 border=0>
                                <TR>
                                    <TD  class="button_cell" valign="TOP" align="CENTER" colspan=1>
                                        <a
                                            href="/CDEBrowser/cdeCartAction.do?method=displayCDECart" target="_top">
                                            <img
                                                id="shoppingButton"
                                                src="icons/buttonIconSet0/black/circle_shopping_cart.png"
                                                alt="CDE Cart"
                                            />
                                        </a>
                                        <br>
                                        &nbsp;CDE &nbsp;Cart
                                    </TD>
                                    <TD class="button_cell" valign="TOP" align="CENTER"  colspan=1>
                                        <a
                                            href="/CDEBrowser/" target="_top">
                                            <img
                                                id="homeButton"
                                                src="icons/buttonIconSet0/black/circle_home.png"
                                                alt="Home"
                                            />
                                        </a>
                                        <br>
                                        &nbsp;Home&nbsp;
                                     </TD>

                                    <TD class="button_cell" valign="TOP" align="CENTER"  colspan=1>
                                        <a
                                            href="https://formbuilder.nci.nih.gov/FormBuilder/formSearchAction.do"
                                            target="_blank">
                                            <img  id="formButton"
                                                src="icons/buttonIconSet0/black/circle_form.png"
                                                alt="FormBuilder"
                                             />
                                        </a>
                                        <br>
                                        &nbsp;FormBuilder&nbsp;
                                    </TD>

                                    <TD class="button_cell" valign="TOP" align="CENTER"  colspan=1>
                                        <a
                                            HREF="https://wiki.nci.nih.gov/display/caDSR/CDE+Browser+User+Guide"
                                            target="_blank">
                                            <img id="helpButton"
                                                src="icons/buttonIconSet0/black/circle_help.png"
                                                alt="Task Help"
                                             />
                                        </a>
                                        <br>
                                        &nbsp;Help&nbsp;
                                    </TD>
                                </TR>
                            </TABLE>
                        </td>
                        <!--  End Four buttons  -->


                    </tr>
                    <tr>
                        <TD colspan=1>
                                    <td align="right">
                                        Tools:

                                        <select id="ddlViewBy">
                                            <option value="1">Admin Tool</option>
                                            <option value="2" >Curation Tool</option>
                                            <option value="3">NCI Metathesaurus</option>
                                            <option value="3">NCI Terminology Server</option>
                                            <option value="3">Sentinel Tool</option>
                                            <option value="3">UML Model Browser</option>
                                            <option value="3">Available Downloads</option>
                                        </select>
                                    </td>
                        </TD>
                    </tr>
                </table>
                <!-- End Logo and four buttons -->
            </td>
        </tr>
    </table>
</div>


<div cdeBrowserApp id="cdeBrowserApp" ng-app="cdeBrowserApp" ng-controller="cdeBrowserController">

    <!--  Left side tree menu  -->
    <!--
    <div id="treeMenuWaitMessage">{{waitMessage}}</div>
    -->
    <div id="treeMenu" class="treeMenu"
         ng-style="resizeHeight()"
         resize
         notifier="notifyServiceOnChange(params)"
            >

        <div
                data-cdebrowser-treeview="true"
                data-tree-id="tree"
                data-tree-model="contextList"
                data-node-action="action"
                data-node-childType="childType"
                data-node-isParent="isParent"
                data-node-type="type"
                data-node-label="contextName"
                data-node-hover="hover"
                data-node-children="children">
        </div>
    </div>


    <!-- =============================================================================== -->
    <div id="resultsDisplay"
         ng-style="resizeHeight()"
         resize
         notifier="notifyServiceOnChange(params)"
            >
    <!--
        <input refreshTree type="button" value="dataLoad0" data-ng-click="dataLoad0()"/>
        <input refreshTree type="button" value="dataLoad1" data-ng-click="dataLoad1()"/>
        <input refreshTree type="button" value="dataLoad2" data-ng-click="dataLoad2()"/>
        <input refreshTree type="button" value="dataLoad3" data-ng-click="dataLoad2b()"/>
    -->
        <input refreshTree type="button" value="dataLoad Srv" data-ng-click="dataLoad3()"/>

     <!--
        <input reSize type="button" value="getHeights" data-ng-click="getHeights()"/>
        <h1>Tree Menu height {{heights3}}</h1><br>
     -->

        <ul>
            <li>Selected Node - {{selectedText}}</li>
            <li>Selected Node onClick action - {{selectedAction}}</li>
            <li>Selected Node hover text - {{selectedHover}}</li>
        </ul>
        <!-- =============================================================================== -->

        <br><hr>
        Set background color :
        <input id="background-color" type="color"  onchange="backgroundColorChange()" />

        Set text color :
        <input id="text-color" type="color"  onchange="textColorChange()" />
       <br>


        Set top-background-color :
        <input id="top-header-background-color" type="color"  onchange="selectTopHeaderColorChange()" />
        <br>

        <input id="headerRedWhiteHeaderButton" type="button" value="White Header" onclick="setHeaderColor()"/>

        <input id="blackButtonsButton" type="button" value="Black buttons" onclick='setButtonColor("black")'/>
        <input id="redButtonsButton" type="button" value="Red buttons" onclick='setButtonColor("red")'/>
        <input id="whiteButtonsButton" type="button" value="White buttons" onclick='setButtonColor("white")'/>


        <input  type="button" value="Icons 0 16" onclick='setIcons(0,16)'/>
        <input  type="button" value="Icons 0 24" onclick='setIcons(0,24)'/>
        <input  type="button" value="Icons 0 32" onclick='setIcons(0,32)'/>
        <input  type="button" value="Icons 1 16" onclick='setIcons(1,16)'/>
        <input  type="button" value="Icons 1 24" onclick='setIcons(1,24)'/>
        <input  type="button" value="Icons 1 32" onclick='setIcons(1,32)'/>

        <script>

            function setIcons(iconSet, size){
                //Set empty folder Icon
                setIconsByClassName( 'emptyFolder', iconSet, size );
                setIconsByClassName( 'closedFolder', iconSet, size );
                setIconsByClassName( 'openFolder', iconSet, size );
            }

            function setIconsByClassName( className, iconSet, size )
            {
                var elems = document.getElementsByClassName(className);
                for (var i = 0; i < elems.length; i++) {
                    elems[i].style.backgroundImage="url('icons/iconSet" + iconSet + "/" + size + "/" + className + "-icon_" + size + ".png')";
                }
            }


            var headerLook=0; //Red
            //console.log("getStyle: " + getStyle('#treeMenu'));
            //console.log("getStyleColorValue: " + getStyleColorValue('#treeMenu', "background-color"));

            //Set the colors at load time to the current colors  -  can't just get them from the objects yet
            var color1=getStyleColorValue('#treeMenu', "color");
            // console.log( color1 );
            var color2=getStyleColorValue('#treeMenu', "background-color");
            // console.log( color2 );
            var color3=getStyleColorValue('#top-header-right', "background-color");
            //console.log( color3);
            //alert( color1 + "\n" + color2 + "\n" + color3);

            document.getElementById("text-color").value = color1
            document.getElementById("background-color").value = color2;
            document.getElementById("top-header-background-color").value = color3;
            document.getElementById("text-color").defaultValue = color1
            document.getElementById("background-color").defaultValue = color2;
            document.getElementById("top-header-background-color").defaultValue = color3;


            function textColorChange()
            {
                document.getElementById("treeMenu").style.color = document.getElementById("text-color").value;
            }

            function backgroundColorChange()
            {
                document.getElementById("treeMenu").style.backgroundColor = document.getElementById("background-color").value;
            }

            function selectTopHeaderColorChange()
            {
                document.getElementById("top-header-right").style.backgroundColor = document.getElementById("top-header-background-color").value;
                document.getElementById("top-header-left").style.backgroundColor = document.getElementById("top-header-background-color").value;
            }
            function setHeaderColor()
            {
                if( headerLook==0)//Red
                {
                    headerLook=1; //white'
                    document.getElementById("headerRedWhiteHeaderButton").value="Red Header";
                    document.getElementById("headerLogoLeft").src = "icons/iconSet0/NCI_logo_red.png";
                    document.getElementById("headerTextLeft").src = "icons/iconSet0/NCI_text_red.png";
                    document.getElementById("headerTextRight").src = "icons/iconSet0/www_text_red.png";
                    document.getElementById("top-header").style.backgroundColor = "#ffffff";
                }
                else if(  headerLook==1)//White
                {
                    headerLook=0; //Red'
                    document.getElementById("headerRedWhiteHeaderButton").value="White Header";
                    document.getElementById("headerLogoLeft").src = "icons/iconSet0/NCI_logo_white.png";
                    document.getElementById("headerTextLeft").src = "icons/iconSet0/NCI_text_white.png";
                    document.getElementById("headerTextRight").src = "icons/iconSet0/www_text_white.png";
                    document.getElementById("top-header").style.backgroundColor = "#aa0202";
                }
            }



            function getStyle(className) {
                var classes = document.styleSheets[0].rules || document.styleSheets[0].cssRules;
                for (var x = 0; x < classes.length; x++) {
                    if (classes[x].selectorText == className) {
                        var cssObject = classes[x].cssText;
                        var res = cssObject.replace(/.*background-color: rgb\(/i, "");
                        res = res.replace(/\).*/, "");
                        var red = res.replace(/,.*/,"");
                        var green = res.replace(/.*,([^,]*).*/, "$1");
                        var blue = res.replace(/.*,/, "");
                        alert(res + "\n" + "Red: " + red +"\n" +"green: " + green +"\n" +"blue: " + blue +"\n" + rgbToHex(red, green, blue));
                    }
                }
            }



            function getStyleColorValue( className, v )
            {
                var c;
                var classes;
                for( var f = 0; f < document.styleSheets.length; f++)
                {
                    classes = document.styleSheets[f].rules || document.styleSheets[f].cssRules;
                    for (var x = 0; x < classes.length; x++)
                    {
                        //console.log("classes[" + x + "].selectorText: " + classes[x].selectorText);
                        if (classes[x].selectorText == className)
                        {
                            //console.log("GOT classes[" + x + "].selectorText: " + classes[x].selectorText);
                            c = classes[x].cssText;
                        }
                    }
                }
                var reg = new RegExp(".*" + v + ": rgb\\(", "i");
                var res = c.replace(reg, "");
                res = res.replace(/\).*/, "");
                var red = res.replace(/,.*/,"");
                var green = res.replace(/.*,([^,]*).*/, "$1");
                var blue = res.replace(/.*,/, "");
                var hex = rgbToHex(red, green, blue);
                //alert("Class: " + className +"\n" + reg + "\n" + res + "\n" + "Red: " + red +"\n" +"green: " + green +"\n" +"blue: " + blue +"\n" + hex);
                return hex;
            }
            function componentToHex(c) {
                var hex = Number(c).toString(16);
                return hex.length == 1 ? "0" + hex : hex;
            }


            function setButtonColor( color )
            {
                document.getElementById("shoppingButton").src = "icons/buttonIconSet0/" + color + "/circle_shopping_cart.png";
                document.getElementById("helpButton").src = "icons/buttonIconSet0/" + color + "/circle_help.png";
                document.getElementById("homeButton").src = "icons/buttonIconSet0/" + color + "/circle_home.png";
                document.getElementById("formButton").src = "icons/buttonIconSet0/" + color + "/circle_form.png";
                setButtonTextColor(color);
            }
            function setButtonTextColor( color)
            {
                console.log("In setButtonTextColor " + color );
                var elems = document.getElementsByClassName('button_cell');
                console.log("In setButtonTextColor len: " + elems.length );
                for (var i = 0; i < elems.length; i++) {
                    elems[i].style.color = color;
                    console.log("In setButtonTextColor button_cell[" + i + "] color: " + elems[i].color );
                }
            }


            function rgbToHex(r, g, b) {
                return "#" + componentToHex(r) + componentToHex(g) + componentToHex(b);
            }



        </script>

    </div>
</div>
</BODY>
</HTML>